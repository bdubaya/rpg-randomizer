import random
import re

class Room:
  strings_from_text = open("RandomValues.txt","r").read().split("\n")

  def randomize(self, type_to_randomize):
    shapes = list(filter(lambda x: type_to_randomize + ": " in x, self.strings_from_text))
    random_val = random.randint(0,len(shapes)-1)
    setattr(self,type_to_randomize,shapes[random_val])

  def __init__(self, description=None):
    if description is None:
      self.randomize("shape")
      self.randomize("air_feel")
    else:
      self.shape = description



class Door:
  def connect(self,room_a,room_b):
    self.rooms = [room_a, room_b]

  def open(self,open_from):
    if open_from in self.rooms:
      return list(filter(lambda x: x != open_from, self.rooms))[0]
    return None



# Dungeon class has the layout of all rooms
class Dungeon:
  layout = {frozenset([0,0]) :Room()}

  def at(self, x, y):
    return self.layout[frozenset([x,y])]

  def add(self, new_room):
    # Use Regex to find the dimensions of the room
    m = re.split('(\d*)x(\d*)', new_room.shape)
    print("Dimensions for room are {0} and {1}".format(m[1], m[2]))




# Let's do some testing
donj = Dungeon()
random_room = donj.at(0,0)

print(random_room.shape)
print(random_room.air_feel)

donj.add(Room())
